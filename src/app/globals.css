@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #1d1d1f;
  /* Apple-like neutral grays */
  --gray-50: #fafafa;
  --gray-100: #f5f5f7;
  --gray-200: #e8e8ed;
  --gray-300: #d2d2d7;
  --gray-400: #a1a1a6;
  --gray-500: #86868b;
  --gray-600: #636366;
  --gray-700: #48484a;
  --gray-800: #1d1d1f;
  /* Apple-like accent blue */
  --blue-500: #007aff;
  --blue-600: #0051d5;
  --blue-50: #e3f2fd;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

.dark {
  --background: #000000;
  --foreground: #f5f5f7;
}

:root {
  color-scheme: light;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  overflow-x: hidden;
  margin: 0;
  /* Prevent iOS Safari from moving fixed elements when scrolling */
  -webkit-overflow-scrolling: touch;
  /* Apple-like subtle background */
  background-color: #fafafa;
}

.dark body {
  background-color: #000000;
}

/* Responsive base styles */
* {
  box-sizing: border-box;
}

html {
  width: 100%;
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

body {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  position: relative;
}

/* Fix for iOS Safari fixed positioning issue with bottom navigation */
@media (max-width: 480px) {
  body {
    margin: 0;
    max-width: 100vw;
    width: 100vw;
  }
}

html.calendar-modal-open .mobile-bottom-nav {
  display: none !important;
}

/* Fix bottom navigation on mobile Safari - MUST be in body */
body > .mobile-bottom-nav {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
  transform: translate3d(0, 0, 0) !important;
  -webkit-transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;
  isolation: isolate !important;
  contain: layout style paint !important;
  pointer-events: none !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Prevent any parent from affecting fixed position */
.mobile-bottom-nav {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
}

/* Ensure body doesn't interfere with fixed positioning */
@media (max-width: 768px) {
  html {
    height: 100%;
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }
  
  body {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 80px;
    position: relative;
    width: 100%;
    max-width: 100vw;
    /* Prevent iOS Safari address bar from affecting layout */
    min-height: -webkit-fill-available;
  }
  
  /* Prevent transforms on parent containers that could affect fixed children */
  body > div:not(.mobile-bottom-nav) {
    transform: none !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  /* Ensure the main container doesn't interfere */
  body > div[class*="AppShell"] {
    transform: none !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  /* Ensure PlannerShell doesn't cause horizontal scroll on mobile */
  body > div[style*="bg-[#030711]"],
  div[class*="PlannerShell"],
  [class*="PlannerShell"] {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
  }
  
  /* Prevent any container from causing horizontal scroll */
  * {
    max-width: 100%;
  }
  
  /* Ensure images and media don't overflow */
  img, video, iframe, embed, object {
    max-width: 100%;
    height: auto;
  }
  
  /* Ensure tables are scrollable instead of overflowing */
  table {
    display: block;
    overflow-x: auto;
    width: 100%;
    -webkit-overflow-scrolling: touch;
  }
}

/* Improve touch targets on mobile */
@media (max-width: 640px) {
  button, a, input, select, textarea {
    min-height: 44px;
  }
  
  /* Better tap highlighting */
  * {
    -webkit-tap-highlight-color: rgba(99, 102, 241, 0.1);
  }
  
  /* Ensure text is readable and doesn't overflow */
  p, span, div, h1, h2, h3, h4, h5, h6 {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  /* Prevent horizontal scroll from any element */
  * {
    max-width: 100%;
  }
  
  /* Better spacing for mobile */
  .space-y-6 > * + * {
    margin-top: 1rem;
  }
  
  .space-y-4 > * + * {
    margin-top: 0.75rem;
  }
  
  .space-y-3 > * + * {
    margin-top: 0.5rem;
  }
}

/* Tablet optimizations */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Ensure content fits well on tablets */
  body {
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Better grid layouts for tablets */
  .grid {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
}

/* Large screen optimizations */
@media (min-width: 1025px) {
  /* Prevent content from being too wide on large screens */
  body {
    max-width: 100vw;
  }
  
  /* Center content on very large screens */
  .max-w-\[1400px\] {
    max-width: min(1400px, 95vw);
  }
}

/* Prevent any element from causing horizontal scroll */
@media (max-width: 1920px) {
  * {
    max-width: 100%;
  }
  
  /* Allow specific elements to be wider if needed */
  pre, code {
    overflow-x: auto;
    max-width: 100%;
  }
}
